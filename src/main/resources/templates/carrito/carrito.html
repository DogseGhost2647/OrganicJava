<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Carrito de Compras</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body>

<!-- NAVBAR -->
<nav class="shadow mb-4" style="background-color: #6c9724;">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between h-16 items-center">
        <a th:href="@{/homeusuario}" class="text-xl font-semibold text-white">Organic</a>
        <div class="space-x-4">
            <a href="@{/homeusuario#productos" class="text-white hover:underline">Productos</a>
            <a th:href="@{/carrito/{id}}" class="text-white hover:underline">Carrito</a>
            <a th:href="@{/blog}" class="text-white hover:underline">Blog</a>
            <a th:href="@{/contacto}" class="text-white hover:underline">Contacto</a>
            <a th:href="@{/logout}" class="text-white hover:text-gray-200 transition">Cerrar sesi√≥n</a>
        </div>
    </div>
</nav>

<div class="container mt-5">
    <h2>Mi carrito (ID: <span th:text="${carrito.carritoId}">0</span>)</h2>

    <table>
        <thead>
        <tr><th>Producto</th><th>Cantidad</th><th>Precio</th><th>Total</th><th></th></tr>
        </thead>
        <tbody>
        <tr th:each="p : ${carrito.productos}">
            <td th:text="${p.nombreProducto}">Nombre</td>
            <td>
                <form th:action="@{/carrito/actualizar}" method="post" style="display:inline">
                    <input type="hidden" name="productoId" th:value="${p.productoId}" />
                    <input type="number" name="cantidad" th:value="${p.cantidad}" min="1" />
                    <button type="submit">Actualizar</button>
                </form>
            </td>
            <td th:text="${p.precio}">0</td>
            <td th:text="${p.precio * p.cantidad}">0</td>
            <td>
                <form th:action="@{/carrito/eliminar/{productoId}(productoId=${p.productoId})}" method="post">
                    <button type="submit">Eliminar</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>